#!/bin/bash
# Get the process ID (PID) of the Gunicorn master process
PID=$(pgrep gunicorn)

# Check if Gunicorn is running
if [ -z "$PID" ]; then
    echo "Gunicorn is not running."
    exit 1
fi

# Send a signal to the master process to gracefully reload
kill -HUP "$PID"

# Wait for a short period to allow Gunicorn to restart
sleep 2

# Check if Gunicorn restarted successfully
if pgrep -F /tmp/gunicorn.pid >/dev/null 2>&1; then
    echo "Gunicorn restarted successfully."
else
    echo "Gunicorn failed to restart."
fi
